:root{
  --bg: #fffdf7;
  --panel: #fff7ed;
  --accent: #ff6f00;
  --muted: #666;
  --card-shadow: 0 6px 16px rgba(0,0,0,.08);
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
}

body{
  margin:0;
  padding:18px;
  background:var(--bg);
  color:#222;
}

.top { margin-bottom:12px; }
.top h1 { margin:0; color:var(--accent); font-size:22px; }

.controls{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom:12px;
}

.controls input, .controls select {
  padding:8px;
  border-radius:10px;
  border:2px solid #ffd180;
  background:#fffaf3;
}

.controls button {
  padding:8px 12px;
  border:none;
  border-radius:10px;
  color:#fff;
  background:linear-gradient(135deg,#03a9f4,#0288d1);
  cursor:pointer;
}

.workspace{
  display:flex;
  gap:18px;
}

.left{ flex:1; min-width:360px; }
.right{ width:420px; }

.canvas-wrap{
  background:var(--panel);
  padding:12px;
  border-radius:14px;
  box-shadow:var(--card-shadow);
  display:flex;
  gap:12px;
  flex-direction:column;
}

/* crop preview */
.crop-container{
  width:100%;
  height:320px;
  overflow:hidden;
  position:relative;
  border-radius:8px;
  background:#fff;
}

.crop-container img{
  position:absolute;
  top:0; left:0;
  user-select:none;
  -webkit-user-drag:none;
}

/* full view */
.full-container{ display:none; }
.full-image-wrapper{ position:relative; display:block; }
.full-image-wrapper img{ display:block; max-width:100%; height:auto; user-select:none; -webkit-user-drag:none; }
.boxes-layer{ position:absolute; inset:0; pointer-events:none; }

/* box style */
.box{
  position:absolute;
  border:2px solid rgba(255,80,80,0.95);
  background:rgba(255,80,80,0.08);
  display:flex; align-items:center; justify-content:center;
  font-weight:bold;
  color:#700;
  box-sizing:border-box;
}
.box.current{
  border-color:rgba(3,169,244,0.95);
  background:rgba(3,169,244,0.08);
  color:#0277bd;
}

/* navigation */
.nav-row{ display:flex; gap:8px; align-items:center; margin-top:8px; }
.nav{ padding:8px 12px; border-radius:8px; border:none; background:#666; color:#fff; cursor:pointer; }
.item-select{ padding:8px 10px; border-radius:8px; background:#fffaf3; border:2px solid #ffd180; }

/* live row */
.live-row{ display:flex; gap:8px; align-items:center; margin-top:8px; }
.live-row input[readonly]{ background:#fffaf3; border:2px solid #ffd180; padding:8px; border-radius:8px; }

/* item list */
.item-list{ margin-top:10px; display:grid; grid-template-columns:repeat(1,1fr); gap:10px; max-height:420px; overflow:auto; }
.card{ background:#fff; padding:10px; border-radius:10px; box-shadow:var(--card-shadow); font-size:13px; }
.card .row{ display:flex; gap:8px; align-items:center; }

/* popup */
.popup{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:999; }
.popup-box{ background:#fff; padding:14px; border-radius:12px; width:340px; box-shadow:0 12px 36px rgba(0,0,0,.25); }
.popup-box label{ display:block; margin-bottom:8px; font-size:13px; color:#333; }
.popup-box input, .popup-box select{ width:100%; padding:8px; border-radius:8px; border:1px solid #ddd; margin-top:6px; box-sizing:border-box; }

.popup-actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:10px; }
.yes{ background:linear-gradient(135deg,#4caf50,#2e7d32); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
.no{ background:linear-gradient(135deg,#f44336,#c62828); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }

/* responsive */
@media (max-width:900px){
  .workspace{ flex-direction:column; }
  .right{ width:100%; }
  .crop-container{ height:260px; }
}